// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Prisma 的数据源配置，这里我们使用 SQLite 数据库
datasource db {
  provider = "sqlite"
  url      = "file:./dev.db" // 数据库文件路径
}

// Prisma 的客户端生成器配置，用于生成 TypeScript 类型的 Prisma Client
generator client {
  provider = "prisma-client-js"
}

// “排盘”数据模型定义
model PaiPan {
  id        Int      @id @default(autoincrement()) // 唯一ID，自增
  year      Int      // 出生年份
  name      String?  // 姓名（可选）
  month     Int      // 出生月份
  day       Int      // 出生日期
  hour      Int?     // 出生时辰（可选）
  gender    String   // 性别
  createdAt DateTime @default(now()) // 记录创建时间
  result    Json     // 存储计算后的完整排盘结果，JSON格式

  // 与User模型关联
  user   User @relation(fields: [userId], references: [id])
  userId Int
}

// 用户数据模型
model User {
  id        Int      @id @default(autoincrement()) // 唯一ID，自增
  username  String   @unique // 用户名，唯一
  password  String   // 密码（存储加密后的哈希值）
  createdAt DateTime @default(now()) // 账户创建时间

  // 关联排盘记录
  paiPans PaiPan[]
}